! Codegen test module
MODULE test (MAIN=testme) =
BEGIN

LITERAL
    DSC$K_S_BLN     = 8;
MACRO
    DSC$W_LENGTH    = 0,0,16,0%,
    DSC$B_DTYPE     = 0,16,8,0%,
    DSC$B_CLASS     = 0,24,8,0%,
    DSC$A_POINTER   = 4,0,32,0%;
    
OWN
    testown : INITIAL (29),
    ch      : VECTOR [4,BYTE] INITIAL(%CHAR(%X'7F'),%CHAR(%X'EE'),
                                      %CHAR(%X'0A'), %CHAR(%x'0D'));

ROUTINE testrtn (p1) =
BEGIN

LOCAL val;
val = (
SELECTONE .p1 OF
SET
    [1,3,5] : 1;
    [0,2,4] : 0;
    [OTHERWISE] : 972;
TES);

.val

END;

OWN farfel;

GLOBAL ROUTINE testme : NOVALUE =
BEGIN
    LOCAL
        dsc : BLOCK [DSC$K_S_BLN,BYTE]
                PRESET ([DSC$B_DTYPE] = 14,
                        [DSC$B_CLASS] = 2,
                        [DSC$W_LENGTH] = 32),
        buf : VECTOR [32,BYTE] INITIAL (1,2,3,4),
        hello;

    hello = PLIT(REP 37 OF (%STRING('abcde')));
    farfel = hello;
    DECRU i FROM 77 BY 2 DO
    BEGIN
        hello = .hello + .i;
    END;
    
    farfel = hello + 1;
    
END;

END
ELUDOM
