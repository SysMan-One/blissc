MODULE test =
BEGIN
    FIELD
        DSC_FIELDS = 
            SET
            DSC$W_LENGTH = [0,0,16,0],
            DSC$B_CLASS  = [2,0,8,0],
            DSC$B_DTYPE  = [3,0,8,0],
            DSC$A_POINTER= [4,0,32,0]
            TES;
    LITERAL
        DSC$K_S_BLN = 8,
        DSC$K_CLASS_S = 2,
        DSC$K_DTYPE_T = 14,
        TESTLIT = -7;
    OWN
        QQQ : BLOCK [DSC$K_S_BLN,BYTE] FIELD (DSC_FIELDS)
                PRESET ([DSC$W_LENGTH] = 0,
                        [DSC$B_DTYPE] = DSC$K_DTYPE_T,
                        [DSC$B_CLASS] = DSC$K_CLASS_S,
                        [DSC$A_POINTER] = 0),
        QTEXT : BLOCK [64,BYTE];
    GLOBAL BIND
        RRR = QQQ : VECTOR [2,LONG];
        
    PSECT
        NODEFAULT = FARFEL (EXECUTE,OVERLAY),
        GLOBAL = $CODE$,
        CODE = $OWN$;
    OWN
        ALPHA : WORD ALIGN(2) PSECT(FARFEL) VOLATILE,
        BETA  : LONG INITIAL(37) ALIAS,
        GAMMA : LONG,
        MU : WORD;
    GLOBAL
        BITE : SIGNED WORD;
    EXTERNAL
        ME : LONG UNSIGNED;        
    LITERAL
        Z = 3 + 4,
        Y = Z + 2 * 5;
%PRINT(%ASCII'Z is: ',%NUMBER(Z), %ASCII', Y is: ', %NUMBER(Y))
    LITERAL
        A = (Z + 5) * (Y - 5);
%PRINT('A is: ', %NUMBER(A))
    LITERAL
        T = A EQL 144,
        B = Z AND 3;
%PRINT('T is: ', %NUMBER(T))
%PRINT('B is: ', %NUMBER(B))
%PRINT('CTCE test: ',%NUMBER(%CTCE(A,B,T,Y,Z,%ASCII'HELLO')))
%PRINT('CTCE test 2: ',%NUMBER(%CTCE('hi there',%string('go','away'))))
%PRINT('DSC$W_LENGTH: ', %EXPLODE(%FIELDEXPAND(DSC$W_LENGTH)))
%PRINT('DSC$A_POINTER.0:', %NUMBER(%FIELDEXPAND(DSC$A_POINTER,0)))
%PRINT('DSC$A_POINTER.1:', %NUMBER(%FIELDEXPAND(DSC$A_POINTER,1)))
%PRINT('DSC$A_POINTER.2:', %NUMBER(%FIELDEXPAND(DSC$A_POINTER,2)))
%PRINT('DSC$A_POINTER.3:', %NUMBER(%FIELDEXPAND(DSC$A_POINTER,3)))
%PRINT('ALLOCATION(QQQ):', %NUMBER(%ALLOCATION(QQQ)))
%PRINT('SIZE(VECTOR[12]):', %NUMBER(%SIZE(VECTOR[12])))
%PRINT('TESTLIT is:',%NUMBER(TESTLIT))
%PRINT('LTCE test: ',%NUMBER(%LTCE(ALPHA+Z)))
%PRINT('LTCE test: ',%NUMBER(%LTCE(.QQQ [DSC$W_LENGTH])))
%PRINT('LTCE test: ',%NUMBER(%LTCE(ALPHA,BETA,GAMMA,MU,Z,Y,A,BITE,ME)))
%PRINT('LTCE test: ',%NUMBER(%LTCE(RRR[0])))
%PRINT('LTCE test: ',%NUMBER(%LTCE(QQQ [DSC$W_LENGTH])))
%PRINT('LTCE test: ',%NUMBER(%LTCE(ALPHA EQLA BETA)))
%PRINT('LTCE test: ',%NUMBER(%LTCE(BETA EQLA MU)))

GLOBAL ROUTINE testrtn (ABC, DEF : REF BLOCK[,BYTE]) : NOVALUE =
BEGIN
    LABEL
        blklabel1, blklabel2;
    LOCAL
        GHI : WORD;
        
    GHI = 64;
        
    blklabel1:BEGIN
                DEF[DSC$W_LENGTH] = .GHI;
                DEF[DSC$B_DTYPE] = DSC$K_DTYPE_T;
                DEF[DSC$B_CLASS] = DSC$K_CLASS_S;
                DEF[DSC$A_POINTER] = QTEXT;
              END;
    CODECOMMENT 'hi there': blklabel2: BEGIN END;
    CODECOMMENT 'another': BEGIN END;
END;
END
ELUDOM
